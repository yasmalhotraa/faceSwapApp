<%- include('partials/header', { title: 'All Submissions', pageCSS:
'submissions.css' }) %>

<div class="stats">
  <strong>
    Total Submissions: <%= submissions ? submissions.length : 0 %>
  </strong>
</div>

<% if (submissions && submissions.length > 0) { %>
<div class="submissions-grid">
  <% submissions.forEach(sub => { %>
  <div class="submission-card">
    <!-- Card Content -->
    <div class="card-content">
      <div class="card-info">
        <div class="info-row">
          <span class="info-label">Name</span>
          <span class="info-value"><%= sub.name %></span>
        </div>
        <div class="info-row">
          <span class="info-label">Email</span>
          <span class="info-value email"><%= sub.email %></span>
        </div>
        <div class="info-row">
          <span class="info-label">Phone</span>
          <span class="info-value"><%= sub.phone %></span>
        </div>
        <div class="info-row">
          <span class="info-label">Submitted</span>
          <span class="info-value"
            ><%= new Date(sub.createdAt).toLocaleString() %></span
          >
        </div>
      </div>

      <!-- Image Previews -->
      <div class="card-image">
        <div class="image-preview-container">
          <h4>Original</h4>
          <img
            src="<%= sub.originalImage %>"
            alt="Original"
            class="image-preview"
            onclick="window.open(this.src, '_blank')"
          />
        </div>
        <div class="image-preview-container">
          <h4>Face Swapped</h4>
          <img
            src="<%= sub.swappedImage %>"
            alt="Swapped"
            class="image-preview"
            onclick="window.open(this.src, '_blank')"
          />
        </div>
      </div>
    </div>

    <!-- Card Actions -->
    <div class="card-actions">
      <a
        href="/download?url=<%= encodeURIComponent(sub.originalImage) %>&name=original_<%= sub.name.replace(/\s+/g, '_') %>.jpg"
        class="action-btn secondary"
      >
        Download Original
      </a>
      <a
        href="/download?url=<%= encodeURIComponent(sub.swappedImage) %>&name=swapped_<%= sub.name.replace(/\s+/g, '_') %>.jpg"
        class="action-btn"
      >
        Download Swapped
      </a>
    </div>
  </div>
  <% }) %>
</div>
<% } else { %>
<div class="no-submissions">
  <h2>ðŸ“­ No submissions yet</h2>
  <p>Be the first to submit your photo for a face swap!</p>
  <a href="/" class="back-btn">ðŸš€ Submit Your Photo</a>
</div>
<% } %>

<div style="text-align: center; margin-top: 30px">
  <a href="/" class="back-btn">âž• Add New Submission</a>
</div>

<%- include('partials/footer') %>
